<!DOCTYPE HTML5>
<html lang="en-us">

  <head>
	<meta charset="UTF-8">
	<title>Parking Monitor | Driftmier Engineering Center (S17)</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,100,700|Roboto+Slab:300"
          rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="../stylesheets/styles.css" media="screen">
	<link rel="icon" href="../images/ic_directions_car_black_48dp_1x.png">
  <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyBTgC9QcoHbGTYuCRbRNcHSf8cSQq3v-4s",
      authDomain: "parking-monitor.firebaseapp.com",
      databaseURL: "https://parking-monitor.firebaseio.com",
      storageBucket: "parking-monitor.appspot.com",
    };
    firebase.initializeApp(config);
  </script>
	<script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
	<script>
		var spots = document.getElementsByClassName("spot");

		firebase.database().ref('lots/S17').on('child_added', function(snapshot) {
			var spot = snapshot.val().spot;
			if (snapshot.val().distance < 200) {
				spots[spot-1].className = "spot-full spot";
			} else {
				spots[spot-1].className = "spot-empty spot";
			}
		});

	</script>
  </head>

  <body>
    <section class="page-header">
      <h1 class="project-name">Parking Monitor <img src="../images/ic_directions_car_white_48px.svg"></h1>
      <h2 class="project-tagline">Map of available parking spots in Driftmier Engineering Center (S17)</h2>
    </section>


    <section class="main-content">

      <a href="../index.html">Home</a> &gt;
        <a href="../map.html">Map</a> &gt;
        <a href="drift.html	">Driftmier Engineering Center (S17)</a>
      <h3>Fill level of Driftmier Engineering Center (S17)</h3>

      <!-- <div class="detailed-info-box">
        <p>Time occupied in last 30 days: x%</p>
        <p><img src="graph-mockup.png" width="200px" height="100px"/></p>
      </div> -->

      <ul class="spot-list-key">
        <li><div class="spot-empty"></div>Empty</li>
        <li><div  class="spot-full"></div>Full</li>
        <li><div  class=""></div>No data</li>
        <li><div  class="yellow-striped"></div>No parking</li>
        <li><div  class="blue-striped"></div>Handicap</li>
      </ul>


      <div class="spot-list-container">
      <img id="background-image-drift" src="../images/drift_background.png" />
      <br>
      <ul class="spot-list">
        <a href="#"><li class="spot" id="drift-1"></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="yellow-striped"></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="yellow-striped"></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="yellow-striped"></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="handicap"><img src="../images/ic_accessible_black_24px.svg"></li></a>
        <a href="#"><li class="blue-striped"></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="yellow-striped"></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
        <a href="#"><li class="spot" ></li></a>
      </ul>
      <div class="spot-vert-spacer" id="drift-spacer-1"></div>
      <ul class="spot-list">
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
      </ul>
      <div class="spot-vert-spacer" id="drift-spacer-2"></div>
      <ul class="spot-list">
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="spacer-spot"></li></a>
        <a href="#"><li class="yellow-striped"></li></a>
        <a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
        <a href="#"><li class="yellow-striped"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="spot"></li></a>
        <a href="#"><li class="yellow-striped"></li></a>
      </ul>
      <div class="spot-vert-spacer" id="drift-spacer-3"></div>
      <ul class="spot-list">
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
				<a href="#"><li class="spot"></li></a>
      </ul>
      <div class="spot-vert-spacer" id="drift-spacer-4"></div>
      </div>

      <hr>

      <h3>History</h3>
      <p>
        <div class="week-chart">
            <div class="week-chart-bar-container">
                <div class="week-chart-bar"></div>
                <div class="week-chart-bar"></div>
                <div class="week-chart-bar"></div>
                <div class="week-chart-bar"></div>
                <div class="week-chart-bar"></div>
                <div class="week-chart-bar"></div>
                <div class="week-chart-bar"></div>
            </div>
            <div class="week-chart-label-container">
                <div class="week-chart-label">Sunday</div>
                <div class="week-chart-label">Monday</div>
                <div class="week-chart-label">Tuesday</div>
                <div class="week-chart-label">Wednesday</div>
                <div class="week-chart-label">Thursday</div>
                <div class="week-chart-label">Friday</div>
                <div class="week-chart-label">Saturday</div>
            </div>
            <script>
                // the bar elements
                var bars = document.getElementsByClassName("week-chart-bar");
                // the totals for each day of the week
                var dayTotals = [0,0,0,0,0,0,0];
                // firebase junk
                firebase.database().ref('lots/S17').once('value').then(function(snapshot) {
                    snapshot.forEach(function(childSnapshot) {
                        var currentDataDate = new Date();
                        // set the time and convert to Eastern
                        var dateRaw = childSnapshot.val().date;
                        currentDataDate.setTime(dateRaw + 7*60*60*1000);
                        // add one to the total for the day of the week that it was recorded on
                        dayTotals[currentDataDate.getDay()] += 1;

                    });
                    // find the height from the largest value
                    var maxCount = Math.max.apply(Math, dayTotals);
                    for (var i=0; i<7;i++) {
                        dayTotals[i] /= maxCount;
                    }
                    // update the bars
                    var heightMultiplier = 8;
                    for (var i=0; i<7;i++) {
                        var heightText = dayTotals[i]*heightMultiplier + "em";
                        bars[i].style.height = heightText;
                        console.log(heightText);
                    }
                });

            </script>
        </div>
      </p>


        <br/>
        <br/>

      <footer class="site-footer">
        <hr> &copy; Ryan Charnoky, Anton Franzluebbers, Nithin Jino 2016
      </footer>

    </section>


  </body>

  </html>
